# â˜ï¸ äº‘å¼€å‘é…ç½®æ•™ç¨‹

æœ¬é¡¹ç›®å·²å‡çº§ä¸º**å¾®ä¿¡äº‘å¼€å‘ç‰ˆæœ¬**ï¼Œæ•°æ®ä¿å­˜åœ¨å¾®ä¿¡äº‘ç«¯ï¼Œæ¯ä¸ªç”¨æˆ·çš„æ•°æ®ç‹¬ç«‹éš”ç¦»ã€‚

---

## ğŸ“‹ å‰ç½®è¦æ±‚

- âœ… å·²æ³¨å†Œå¾®ä¿¡å°ç¨‹åºè´¦å·ï¼ˆä¸ªäººæˆ–ä¼ä¸šï¼‰
- âœ… å·²è·å¾— AppIDï¼ˆéæµ‹è¯•å·ï¼‰
- âœ… å¾®ä¿¡å¼€å‘è€…å·¥å…·ç‰ˆæœ¬ >= 1.02.1904090

---

## ğŸš€ äº‘å¼€å‘é…ç½®æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå¼€é€šäº‘å¼€å‘

1. **æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·**
   - ä½¿ç”¨ä½ çš„ AppID å¯¼å…¥é¡¹ç›®

2. **ç‚¹å‡»å·¥å…·æ çš„"äº‘å¼€å‘"æŒ‰é’®**
   - ä½äºé¡¶éƒ¨èœå•æ ï¼šå·¥å…·æ  â†’ äº‘å¼€å‘

3. **åŒæ„åè®®å¹¶å¼€é€š**
   - é¦–æ¬¡å¼€é€šéœ€è¦åŒæ„æœåŠ¡åè®®
   - é€‰æ‹©"æŒ‰é‡ä»˜è´¹"ï¼ˆå…è´¹é¢åº¦è¶³å¤Ÿä¸ªäººä½¿ç”¨ï¼‰

4. **åˆ›å»ºäº‘ç¯å¢ƒ**
   - ç¯å¢ƒåç§°ï¼šä»»æ„ï¼ˆå¦‚ `poker-ledger`ï¼‰
   - ç¯å¢ƒ IDï¼šè‡ªåŠ¨ç”Ÿæˆï¼ˆå¦‚ `poker-ledger-xxxxx`ï¼‰
   - **é‡è¦**ï¼šè®°ä¸‹è¿™ä¸ªç¯å¢ƒ ID

---

### ç¬¬äºŒæ­¥ï¼šé…ç½®ç¯å¢ƒ IDï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æœ‰å¤šä¸ªäº‘ç¯å¢ƒï¼Œéœ€è¦æŒ‡å®šç¯å¢ƒ IDï¼š

1. **æ‰“å¼€ `app.js` æ–‡ä»¶**

2. **æ‰¾åˆ°è¿™æ®µä»£ç **ï¼š
   ```javascript
   wx.cloud.init({
     // env: 'your-env-id',  // è¿™é‡Œ
     traceUser: true,
   })
   ```

3. **å–æ¶ˆæ³¨é‡Šå¹¶å¡«å…¥ä½ çš„ç¯å¢ƒ ID**ï¼š
   ```javascript
   wx.cloud.init({
     env: 'poker-ledger-xxxxx',  // æ›¿æ¢ä¸ºä½ çš„ç¯å¢ƒ ID
     traceUser: true,
   })
   ```

4. **ä¿å­˜æ–‡ä»¶**

> **æç¤º**ï¼šå¦‚æœåªæœ‰ä¸€ä¸ªäº‘ç¯å¢ƒï¼Œå¯ä»¥ä¸é…ç½®ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤ç¯å¢ƒã€‚

---

### ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºäº‘æ•°æ®åº“é›†åˆ

1. **åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€"äº‘å¼€å‘æ§åˆ¶å°"**
   - ç‚¹å‡»é¡¶éƒ¨èœå•æ "äº‘å¼€å‘"æŒ‰é’®
   - è¿›å…¥äº‘å¼€å‘æ§åˆ¶å°

2. **è¿›å…¥"æ•°æ®åº“"é€‰é¡¹å¡**

3. **åˆ›å»ºé›†åˆ**
   - ç‚¹å‡»"æ·»åŠ é›†åˆ"æŒ‰é’®
   - é›†åˆåç§°ï¼š`poker_records`ï¼ˆå¿…é¡»æ˜¯è¿™ä¸ªåç§°ï¼‰
   - ç‚¹å‡»"ç¡®å®š"

4. **é…ç½®æƒé™**
   - é€‰æ‹©åˆšåˆ›å»ºçš„ `poker_records` é›†åˆ
   - ç‚¹å‡»"æƒé™è®¾ç½®"
   - é€‰æ‹©æƒé™æ¨¡å¼ï¼š**ä»…åˆ›å»ºè€…å¯è¯»å†™**
   - ä¿å­˜

---

### ç¬¬å››æ­¥ï¼šç¼–è¯‘å¹¶æµ‹è¯•

1. **ç‚¹å‡»"ç¼–è¯‘"æŒ‰é’®**
   - æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦è¾“å‡ºï¼š`äº‘å¼€å‘ç¯å¢ƒåˆå§‹åŒ–æˆåŠŸ`

2. **æµ‹è¯•æ·»åŠ è®°å½•**
   - è¿›å…¥"æ·»åŠ è®°å½•"é¡µé¢
   - è¾“å…¥ä¸€æ¡æµ‹è¯•æ•°æ®
   - ç‚¹å‡»"ä¿å­˜è®°å½•"

3. **æŸ¥çœ‹äº‘æ•°æ®åº“**
   - æ‰“å¼€äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“
   - é€‰æ‹© `poker_records` é›†åˆ
   - åº”è¯¥èƒ½çœ‹åˆ°åˆšæ‰æ·»åŠ çš„è®°å½•

4. **éªŒè¯æ•°æ®éš”ç¦»**
   - è®°å½•ä¸­ä¼šæœ‰ä¸€ä¸ª `_openid` å­—æ®µ
   - è¿™ä¸ªå­—æ®µæ ‡è¯†äº†å½“å‰ç”¨æˆ·
   - ä¸åŒç”¨æˆ·çš„ `_openid` ä¸åŒï¼Œæ•°æ®è‡ªåŠ¨éš”ç¦»

---

## âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] äº‘å¼€å‘å·²å¼€é€š
- [ ] äº‘ç¯å¢ƒå·²åˆ›å»º
- [ ] ç¯å¢ƒ ID å·²é…ç½®ï¼ˆæˆ–ä½¿ç”¨é»˜è®¤ç¯å¢ƒï¼‰
- [ ] æ•°æ®åº“é›†åˆ `poker_records` å·²åˆ›å»º
- [ ] é›†åˆæƒé™è®¾ç½®ä¸º"ä»…åˆ›å»ºè€…å¯è¯»å†™"
- [ ] ç¼–è¯‘æˆåŠŸï¼Œæ§åˆ¶å°æ˜¾ç¤º"äº‘å¼€å‘ç¯å¢ƒåˆå§‹åŒ–æˆåŠŸ"
- [ ] å¯ä»¥æˆåŠŸæ·»åŠ è®°å½•å¹¶åœ¨äº‘æ•°æ®åº“ä¸­çœ‹åˆ°

---

## ğŸ“Š æ•°æ®åº“ç»“æ„

### é›†åˆï¼š`poker_records`

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `_id` | String | è‡ªåŠ¨ç”Ÿæˆçš„å”¯ä¸€ ID |
| `_openid` | String | ç”¨æˆ·çš„ openidï¼ˆè‡ªåŠ¨æ·»åŠ ï¼Œç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| `amount` | Number | è¾“èµ¢é‡‘é¢ï¼ˆæ­£æ•°ä¸ºèµ¢ï¼Œè´Ÿæ•°ä¸ºè¾“ï¼‰ |
| `note` | String | å¤‡æ³¨ä¿¡æ¯ |
| `date` | String | æ—¥æœŸï¼ˆæ ¼å¼ï¼šYYYY-MM-DDï¼‰ |
| `createTime` | Number | åˆ›å»ºæ—¶é—´æˆ³ |

---

## ğŸ”’ æƒé™è¯´æ˜

### æƒé™æ¨¡å¼ï¼šä»…åˆ›å»ºè€…å¯è¯»å†™

è¿™ä¸ªæƒé™æ¨¡å¼ç¡®ä¿ï¼š
- âœ… ç”¨æˆ·åªèƒ½è¯»å†™è‡ªå·±åˆ›å»ºçš„æ•°æ®
- âœ… æ— æ³•æŸ¥çœ‹å…¶ä»–ç”¨æˆ·çš„æ•°æ®
- âœ… è‡ªåŠ¨æ ¹æ® `_openid` è¿›è¡Œæ•°æ®éš”ç¦»
- âœ… æ— éœ€é¢å¤–ç¼–å†™æƒé™æ§åˆ¶ä»£ç 

---

## ğŸ’° è´¹ç”¨è¯´æ˜

### å…è´¹é¢åº¦ï¼ˆæ¯æœˆï¼‰

| èµ„æº | å…è´¹é¢åº¦ | è¯´æ˜ |
|------|----------|------|
| æ•°æ®åº“è¯»æ“ä½œ | 5ä¸‡æ¬¡ | è¶³å¤Ÿä¸ªäººä½¿ç”¨ |
| æ•°æ®åº“å†™æ“ä½œ | 3ä¸‡æ¬¡ | è¶³å¤Ÿä¸ªäººä½¿ç”¨ |
| æ•°æ®åº“å­˜å‚¨ | 2GB | è®°è´¦æ•°æ®å¾ˆå° |
| äº‘å‡½æ•°è°ƒç”¨ | 10ä¸‡æ¬¡ | æœ¬é¡¹ç›®æš‚æœªä½¿ç”¨ |

> ä¸ªäººè®°è´¦å°ç¨‹åºï¼Œå…è´¹é¢åº¦å®Œå…¨å¤Ÿç”¨ï¼Œæ— éœ€æ‹…å¿ƒè´¹ç”¨ã€‚

---

## â“ å¸¸è§é—®é¢˜

### 1. æ‰¾ä¸åˆ°"äº‘å¼€å‘"æŒ‰é’®ï¼Ÿ

**åŸå› **ï¼š
- AppID æ˜¯æµ‹è¯•å·ï¼ˆæµ‹è¯•å·ä¸æ”¯æŒäº‘å¼€å‘ï¼‰
- å¼€å‘è€…å·¥å…·ç‰ˆæœ¬è¿‡ä½

**è§£å†³**ï¼š
- ä½¿ç”¨çœŸå® AppIDï¼ˆéœ€è¦æ³¨å†Œå°ç¨‹åºï¼‰
- æ›´æ–°å¼€å‘è€…å·¥å…·åˆ°æœ€æ–°ç‰ˆæœ¬

---

### 2. æç¤º"äº‘å¼€å‘åˆå§‹åŒ–å¤±è´¥"ï¼Ÿ

**åŸå› **ï¼š
- äº‘ç¯å¢ƒæœªå¼€é€š
- ç¯å¢ƒ ID é…ç½®é”™è¯¯
- ç½‘ç»œé—®é¢˜

**è§£å†³**ï¼š
1. ç¡®è®¤äº‘å¼€å‘å·²å¼€é€š
2. æ£€æŸ¥ `app.js` ä¸­çš„ç¯å¢ƒ ID æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ç½‘ç»œè¿æ¥

---

### 3. æ·»åŠ è®°å½•æ—¶æç¤º"æƒé™ä¸è¶³"ï¼Ÿ

**åŸå› **ï¼š
- æ•°æ®åº“é›†åˆæƒé™è®¾ç½®é”™è¯¯

**è§£å†³**ï¼š
1. æ‰“å¼€äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“
2. é€‰æ‹© `poker_records` é›†åˆ
3. ç‚¹å‡»"æƒé™è®¾ç½®"
4. ç¡®ä¿é€‰æ‹©äº†"ä»…åˆ›å»ºè€…å¯è¯»å†™"

---

### 4. æ•°æ®åº“ä¸­çœ‹ä¸åˆ°æ•°æ®ï¼Ÿ

**åŸå› **ï¼š
- å¯èƒ½æ˜¯æŸ¥è¯¢å¤±è´¥
- æˆ–è€…çœŸçš„æ²¡æœ‰æ•°æ®

**è§£å†³**ï¼š
1. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰æŠ¥é”™
2. ç¡®è®¤æ·»åŠ è®°å½•æ—¶æ˜¯å¦æç¤º"ä¿å­˜æˆåŠŸ"
3. åˆ·æ–°äº‘æ•°æ®åº“é¡µé¢

---

### 5. å¦‚ä½•å¯¼å‡ºæ•°æ®ï¼Ÿ

**æ–¹æ³•**ï¼š
1. æ‰“å¼€äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“
2. é€‰æ‹© `poker_records` é›†åˆ
3. ç‚¹å‡»"å¯¼å‡º"æŒ‰é’®
4. é€‰æ‹©å¯¼å‡ºæ ¼å¼ï¼ˆCSV æˆ– JSONï¼‰
5. ä¸‹è½½å¯¼å‡ºæ–‡ä»¶

---

### 6. å¦‚ä½•æ¸…ç©ºæ•°æ®ï¼Ÿ

**æ–¹æ³•**ï¼š
1. æ‰“å¼€äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“
2. é€‰æ‹© `poker_records` é›†åˆ
3. é€‰ä¸­è¦åˆ é™¤çš„è®°å½•
4. ç‚¹å‡»"åˆ é™¤"æŒ‰é’®

> **è­¦å‘Š**ï¼šåˆ é™¤åæ— æ³•æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œï¼

---

## ğŸ¯ æ•°æ®è¿ç§»ï¼ˆä»æœ¬åœ°ç‰ˆæœ¬å‡çº§ï¼‰

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨çš„æ˜¯æœ¬åœ°å­˜å‚¨ç‰ˆæœ¬ï¼Œæƒ³è¦è¿ç§»æ•°æ®åˆ°äº‘ç«¯ï¼š

### æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨è¿ç§»ï¼ˆå°‘é‡æ•°æ®ï¼‰

1. åœ¨æ—§ç‰ˆæœ¬ä¸­æŸ¥çœ‹è®°å½•
2. åœ¨æ–°ç‰ˆæœ¬ä¸­æ‰‹åŠ¨æ·»åŠ 

### æ–¹æ³•äºŒï¼šä»£ç è¿ç§»ï¼ˆå¤§é‡æ•°æ®ï¼‰

1. **è¯»å–æœ¬åœ°æ•°æ®**ï¼š
   ```javascript
   const localRecords = wx.getStorageSync('poker_records') || []
   ```

2. **æ‰¹é‡ä¸Šä¼ åˆ°äº‘ç«¯**ï¼š
   ```javascript
   localRecords.forEach(record => {
     db.collection('poker_records').add({
       data: record
     })
   })
   ```

3. **æ¸…é™¤æœ¬åœ°æ•°æ®**ï¼š
   ```javascript
   wx.removeStorageSync('poker_records')
   ```

---

## ğŸ“ è·å–å¸®åŠ©

- **å¾®ä¿¡å¼€æ”¾ç¤¾åŒº**ï¼šhttps://developers.weixin.qq.com/community/
- **äº‘å¼€å‘æ–‡æ¡£**ï¼šhttps://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html
- **äº‘æ•°æ®åº“æ–‡æ¡£**ï¼šhttps://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/database.html

---

## ğŸ‰ å®Œæˆ

é…ç½®å®Œæˆåï¼Œä½ çš„å°ç¨‹åºå°†å…·å¤‡ï¼š

âœ… **äº‘ç«¯å­˜å‚¨** - æ•°æ®æ°¸ä¹…ä¿å­˜åœ¨å¾®ä¿¡äº‘ç«¯  
âœ… **è·¨è®¾å¤‡åŒæ­¥** - æ¢æ‰‹æœºä¹Ÿèƒ½çœ‹åˆ°æ•°æ®  
âœ… **ç”¨æˆ·éš”ç¦»** - æ¯ä¸ªç”¨æˆ·åªèƒ½çœ‹åˆ°è‡ªå·±çš„æ•°æ®  
âœ… **è‡ªåŠ¨å¤‡ä»½** - å¾®ä¿¡äº‘ç«¯è‡ªåŠ¨å¤‡ä»½ï¼Œæ•°æ®å®‰å…¨å¯é   

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸ°âœ¨
